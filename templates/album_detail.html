<!--<!DOCTYPE html>-->
<!--<html lang="pl">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Szczegóły Albumu</title>-->

<!--    {% load static %}-->
<!--    <link rel="stylesheet" href="{% static 'styles.css' %}">-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>{{ album.title }}</h1>-->
<!--        <p>Utworzono: {{ album.created_at }}</p>-->

<!--        <h2>Zdjęcia w albumie:</h2>-->
<!--        <div class="photo-gallery">-->
<!--            {% for photo in photos %}-->
<!--                <div class="photo-item">-->
<!--                    <img src="{{ photo.image.url }}" alt="Photo" style="max-width: 200px; max-height: 200px;">-->
<!--                    <div class="photo-actions">-->
<!--                        <a href="{% url 'edit_photo' photo.id %}">Edytuj</a>-->
<!--                        <a href="{% url 'delete_photo' photo.id %}">Usuń</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            {% empty %}-->
<!--                <p>Brak zdjęć w tym albumie.</p>-->
<!--            {% endfor %}-->
<!--        </div>-->

<!--        <h2>Dodaj nowe zdjęcie:</h2>-->
<!--        <form method="post" enctype="multipart/form-data">-->
<!--            {% csrf_token %}-->
<!--            <input type="file" name="image" accept="image/*" required>-->
<!--            <button type="submit">Dodaj zdjęcie</button>-->
<!--        </form>-->

<!--        <h2>Lub zrób zdjęcie kamerą:</h2>-->
<!--        <video id="video" width="320" height="240" autoplay></video>-->
<!--        <button id="capture">Zrób zdjęcie</button>-->
<!--        <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>-->

<!--        <form method="post" enctype="multipart/form-data" id="photoForm">-->
<!--            {% csrf_token %}-->
<!--            <input type="hidden" name="camera_photo" id="camera_photo">-->
<!--            <button type="submit" id="submit_camera_photo" style="display:none;">Zapisz zdjęcie</button>-->
<!--        </form>-->

<!--        <div class="export-buttons">-->
<!--            <a href="{% url 'export_album_pdf' album.id %}" class="btn">Eksportuj do PDF</a>-->
<!--            <a href="{% url 'export_album_docx' album.id %}" class="btn">Eksportuj do DOCX</a>-->
<!--            <a href="{% url 'export_album_html' album.id %}" class="btn">Eksportuj do HTML</a>-->
<!--        </div>-->

<!--        <div class="back-link">-->
<!--            <a href="{% url 'album_list' %}">Powrót do listy albumów</a>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        // Start capturing video from webcam-->
<!--        const video = document.getElementById('video');-->
<!--        const canvas = document.getElementById('canvas');-->
<!--        const captureButton = document.getElementById('capture');-->
<!--        const photoForm = document.getElementById('photoForm');-->
<!--        const cameraPhotoInput = document.getElementById('camera_photo');-->
<!--        const submitButton = document.getElementById('submit_camera_photo');-->

<!--        navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {-->
<!--            video.srcObject = stream;-->
<!--        });-->

<!--        captureButton.addEventListener('click', () => {-->
<!--            const context = canvas.getContext('2d');-->
<!--            canvas.style.display = 'block';-->
<!--            context.drawImage(video, 0, 0, canvas.width, canvas.height);-->
<!--            const imageData = canvas.toDataURL('image/png');-->
<!--            cameraPhotoInput.value = imageData;-->
<!--            submitButton.style.display = 'block';-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="pl">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Szczegóły Albumu</title>-->
<!--    {% load static %}-->
<!--    <link rel="stylesheet" href="{% static 'styles.css' %}">-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h1>{{ album.title }}</h1>-->
<!--        <p>Utworzono: {{ album.created_at }}</p>-->

<!--        <h2>Zdjęcia w albumie:</h2>-->
<!--        <div class="photo-gallery">-->
<!--            {% for photo in photos %}-->
<!--                <div class="photo-item">-->
<!--                    <img src="{{ photo.image.url }}" alt="Photo" style="max-width: 200px; max-height: 200px;">-->
<!--                    <div class="photo-actions">-->
<!--                        <a href="{% url 'edit_photo' photo.id %}">Edytuj</a>-->
<!--                        <a href="{% url 'delete_photo' photo.id %}">Usuń</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            {% empty %}-->
<!--                <p>Brak zdjęć w tym albumie.</p>-->
<!--            {% endfor %}-->
<!--        </div>-->

<!--        <h2>Dodaj nowe zdjęcie:</h2>-->
<!--        <form method="post" enctype="multipart/form-data">-->
<!--            {% csrf_token %}-->
<!--            <input type="file" name="image" accept="image/*" required>-->
<!--            <button type="submit">Dodaj zdjęcie</button>-->
<!--        </form>-->

<!--        <h2>Zrób zdjęcie z kamery:</h2>-->
<!--        <form method="post" enctype="multipart/form-data" action="{% url 'capture_photo' album.id %}">-->
<!--            {% csrf_token %}-->
<!--            <video id="video" width="320" height="240" autoplay></video>-->
<!--            <canvas id="canvas" style="display:none;"></canvas>-->
<!--            <button type="button" id="capture-btn">Zrób zdjęcie</button>-->
<!--            <input type="hidden" name="captured_image" id="captured-image">-->
<!--            <button type="submit">Dodaj zdjęcie z kamery</button>-->
<!--        </form>-->

<!--        <h2>Eksportuj album:</h2>-->
<!--        <a href="{% url 'export_album_pdf' album.id %}" class="btn">Eksportuj do PDF</a>-->
<!--        <a href="{% url 'export_album_docx' album.id %}" class="btn">Eksportuj do DOCX</a>-->
<!--        <a href="{% url 'export_album_html' album.id %}" class="btn">Eksportuj do HTML</a>-->

<!--        <div class="back-link">-->
<!--            <a href="{% url 'album_list' %}">Powrót do listy albumów</a>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        const video = document.getElementById('video');-->
<!--        const canvas = document.getElementById('canvas');-->
<!--        const captureBtn = document.getElementById('capture-btn');-->
<!--        const capturedImageInput = document.getElementById('captured-image');-->

<!--        // Pobieranie dostępu do kamery-->
<!--        navigator.mediaDevices.getUserMedia({ video: true })-->
<!--            .then(function(stream) {-->
<!--                video.srcObject = stream;-->
<!--            });-->

<!--        // Robienie zdjęcia-->
<!--        captureBtn.addEventListener('click', function() {-->
<!--            const context = canvas.getContext('2d');-->
<!--            canvas.width = video.videoWidth;-->
<!--            canvas.height = video.videoHeight;-->
<!--            context.drawImage(video, 0, 0, canvas.width, canvas.height);-->

<!--            const dataUrl = canvas.toDataURL('image/png');-->
<!--            capturedImageInput.value = dataUrl;-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="pl">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Szczegóły albumu</title>-->
<!--    <link rel="stylesheet" href="{% static 'css/style.css' %}">-->
<!--</head>-->
<!--<body>-->
<!--    <h1>Szczegóły albumu: {{ album.title }}</h1>-->

<!--    <h2>Zdjęcia w albumie:</h2>-->
<!--    <div class="photo-gallery">-->
<!--        {% for photo in photos %}-->
<!--            <div class="photo-item">-->
<!--                <img src="{{ photo.image.url }}" alt="Zdjęcie">-->
<!--                <p>{{ photo.description }}</p>-->
<!--                <a href="{% url 'edit_photo' photo.id %}">Edytuj</a> |-->
<!--                <a href="{% url 'delete_photo' photo.id %}">Usuń</a>-->
<!--            </div>-->
<!--        {% endfor %}-->
<!--    </div>-->

<!--    <h2>Dodaj nowe zdjęcie:</h2>-->
<!--    <form method="post" enctype="multipart/form-data" action="{% url 'add_photo' album.id %}">-->
<!--        {% csrf_token %}-->
<!--        {{ form.as_p }}-->
<!--        <button type="submit">Dodaj zdjęcie</button>-->
<!--    </form>-->

<!--    <h2>Zrób zdjęcie:</h2>-->
<!--    <form method="post" enctype="multipart/form-data" action="{% url 'capture_photo' album.id %}">-->
<!--        {% csrf_token %}-->
<!--        <button type="button" id="capture-btn">Zrób zdjęcie kamerą</button>-->
<!--        <input type="file" id="camera-input" accept="image/*" capture="camera" style="display: none;">-->
<!--    </form>-->

<!--    <h2>Eksportuj album:</h2>-->
<!--    <a href="{% url 'export_album_pdf' album.id %}" class="btn">Eksportuj do PDF</a> |-->
<!--    <a href="{% url 'export_album_docx' album.id %}" class="btn">Eksportuj do DOCX</a> |-->
<!--    <a href="{% url 'export_album_html' album.id %}" class="btn">Eksportuj do HTML</a>-->

<!--    <script>-->
<!--        document.getElementById('capture-btn').addEventListener('click', function() {-->
<!--            document.getElementById('camera-input').click();-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->





<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Szczegóły albumu</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        .sticker {
            width: 50px;
            cursor: pointer;
        }
        #edit-container {
            position: relative;
        }
        #canvas {
            border: 1px solid black;
        }
        .draggable {
            position: absolute;
            cursor: move;
        }
    </style>
</head>
<body>
    <h1>Szczegóły albumu: {{ album.title }}</h1>

    <h2>Zdjęcia w albumie:</h2>
    <div class="photo-gallery">
        {% for photo in photos %}
            <div class="photo-item">
                <img src="{{ photo.image.url }}" alt="Zdjęcie">
                <p>{{ photo.description }}</p>
                <a href="{% url 'edit_photo' photo.id %}">Edytuj</a> |
                <a href="{% url 'delete_photo' photo.id %}">Usuń</a>
            </div>
        {% endfor %}
    </div>

    <h2>Dodaj nowe zdjęcie:</h2>
    <form method="post" enctype="multipart/form-data" action="{% url 'add_photo' album.id %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Dodaj zdjęcie</button>
    </form>

    <h2>Zrób zdjęcie:</h2>
    <video id="video" autoplay></video>
    <canvas id="canvas" style="display:none;"></canvas>
    <button id="capture-btn">Zrób zdjęcie</button>
    <form method="post" enctype="multipart/form-data" action="{% url 'capture_photo' album.id %}">
        {% csrf_token %}
        <input type="hidden" name="captured_image" id="captured-image">
        <button type="submit">Dodaj zdjęcie</button>
    </form>

    <h2>Eksportuj album:</h2>
    <a href="{% url 'export_album_pdf' album.id %}" class="btn">Eksportuj do PDF</a> |
    <a href="{% url 'export_album_docx' album.id %}" class="btn">Eksportuj do DOCX</a> |
    <a href="{% url 'export_album_html' album.id %}" class="btn">Eksportuj do HTML</a>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const captureBtn = document.getElementById('capture-btn');
        const capturedImageInput = document.getElementById('captured-image');

        // Pobieranie dostępu do kamery
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                video.srcObject = stream;
            });

        // Robienie zdjęcia
        captureBtn.addEventListener('click', function() {
            const context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            const dataUrl = canvas.toDataURL('image/png');
            capturedImageInput.value = dataUrl;
        });
    </script>
</body>
</html>
